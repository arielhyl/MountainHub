<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>MountainHub Taiwan</title>
    <!-- æ‰€æœ‰çš„ CSS æ¨£å¼ -->
    <style>
        :root {
            --bg: #ffffff;
            --text: #1a1a1a;
            --secondary: #717171;
            --accent: #f5f5f5;
            --border: #eeeeee;
        }

        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; outline: none; }
        body { 
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif; 
            margin: 0; background: var(--bg); color: var(--text); 
            overflow-x: hidden;
        }

        .app-container { max-width: 500px; margin: 0 auto; min-height: 100vh; display: flex; flex-direction: column; }
        .page { flex: 1; padding: 30px 20px 120px 20px; display: none; }
        .page.active { display: block; }

        h1 { font-size: 20px; font-weight: 600; text-transform: uppercase; margin-bottom: 24px; letter-spacing: 1px; }
        h2 { font-size: 16px; color: var(--secondary); margin-top: 30px; font-weight: 400; }

        /* å°èˆªæ¬„æ¨£å¼ */
        nav {
            position: fixed; bottom: 0; left: 0; right: 0;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-top: 0.5px solid var(--border);
            display: flex; justify-content: space-around;
            padding: 12px 0 34px 0;
            z-index: 100;
        }
        .nav-item { cursor: pointer; text-align: center; color: var(--secondary); transition: 0.2s; flex: 1; }
        .nav-item.active { color: var(--text); font-weight: bold; }
        .nav-icon { font-size: 20px; margin-bottom: 4px; display: block; }
        .nav-text { font-size: 10px; text-transform: uppercase; }

        /* é¦–é é€²åº¦æ¢æ¨£å¼ */
        .stats-hero { padding: 40px 0; text-align: center; cursor: pointer; }
        .progress-circle-text { font-size: 48px; font-weight: 200; margin: 0; }
        .progress-bar-bg { width: 100%; height: 2px; background: var(--accent); margin-top: 15px; position: relative; }
        .progress-bar-fill { height: 100%; background: #000; width: 0%; transition: width 0.8s ease; }
        
        /* åˆ—è¡¨é …ç›®é€šç”¨æ¨£å¼ */
        .peak-item { border-bottom: 0.5px solid var(--border); padding: 15px 0; cursor: pointer; }
        .peak-main { display: flex; justify-content: space-between; align-items: center; }
        .peak-title { font-size: 15px; }
        .peak-meta { font-size: 11px; color: var(--secondary); }
        .peak-details { display: none; padding: 15px 0; font-size: 13px; color: var(--secondary); line-height: 1.8; }
        .peak-details.open { display: block; }

        .btn-done { background: #000; color: #fff; border: none; padding: 12px; font-size: 12px; margin-top: 10px; cursor: pointer; width: 100%; border-radius: 0; }
        .btn-done.is-completed { background: var(--accent); color: var(--secondary); }

        /* è¼¸å…¥æ¡†æ¨£å¼ */
        .input-group { display: flex; flex-direction: column; gap: 8px; margin-bottom: 24px; }
        .input-group input { border: 1px solid var(--border); padding: 12px; font-size: 14px; border-radius: 0; width: 100%; -webkit-appearance: none; }
        .input-group button { background: #000; color: #fff; border: none; padding: 14px; font-size: 13px; cursor: pointer; letter-spacing: 1px; }

        /* è¼•é‡åŒ–çœ‹æ¿æ¨£å¼ */
        .weight-card { background: #000; color: #fff; padding: 30px; text-align: center; margin-bottom: 24px; }
        .weight-card small { font-size: 10px; opacity: 0.6; display: block; margin-bottom: 8px; letter-spacing: 1px; }
        .weight-card span { font-size: 42px; font-weight: 200; }

        .list-row { display: flex; align-items: flex-start; justify-content: space-between; padding: 16px 0; border-bottom: 0.5px solid var(--border); font-size: 14px; }
        .log-date { font-size: 11px; color: var(--secondary); margin-bottom: 6px; font-family: monospace; }

        /* å½ˆçª—æ¨£å¼ */
        .modal { display: none; position: fixed; inset: 0; background: rgba(255,255,255,0.98); z-index: 200; padding: 40px 20px; overflow-y: auto; }
        .modal.active { display: block; }
        .close-modal { position: absolute; top: 20px; right: 20px; font-size: 30px; cursor: pointer; color: var(--secondary); }
    </style>
</head>
<body>

<div class="app-container">
    <!-- é¦–é  -->
    <section id="page-home" class="page active">
        <h1>MountainHub</h1>
        <div class="stats-hero" onclick="showCompletedList()">
            <p class="progress-circle-text" id="total-done-count">0</p>
            <p style="font-size: 12px; color: var(--secondary); margin-top: -5px; letter-spacing: 1px;">COMPLETED PEAKS / 100</p>
            <div class="progress-bar-bg"><div class="progress-bar-fill" id="main-progress-bar"></div></div>
            <p style="font-size: 10px; color: var(--secondary); margin-top: 15px;">é»æ“ŠæŸ¥çœ‹å®Œç™»ç´€éŒ„</p>
        </div>
    </section>

    <!-- ç™¾å²³åˆ—è¡¨ -->
    <section id="page-peaks" class="page">
        <h1>Peaks List</h1>
        <div id="peaks-container"></div>
    </section>

    <!-- è£å‚™ç§¤é‡ -->
    <section id="page-gear" class="page">
        <h1>Lightpack</h1>
        <div class="weight-card">
            <small>BASE WEIGHT (KG)</small>
            <span id="base-weight-display">0.00</span>
        </div>
        <div class="input-group">
            <input type="text" id="gear-name" placeholder="å“å (ä¾‹å¦‚ï¼šç¡è¢‹)">
            <input type="number" id="gear-weight" placeholder="é‡é‡ (g)">
            <button onclick="addGear()">ADD TO INVENTORY</button>
        </div>
        <div id="gear-container"></div>
    </section>

    <!-- è¨“ç·´ç´€éŒ„ -->
    <section id="page-training" class="page">
        <h1>Training Log</h1>
        <div class="input-group">
            <input type="date" id="train-date">
            <input type="text" id="train-desc" placeholder="è¨“ç·´é …ç›®èˆ‡å¿ƒå¾—ç´€éŒ„">
            <button onclick="addTrain()">ADD ENTRY</button>
        </div>
        <div id="training-container"></div>
    </section>
</div>

<!-- åº•éƒ¨å°èˆªæ¬„ -->
<nav>
    <div class="nav-item active" onclick="navTo('home')"><span class="nav-icon">â—‹</span><span class="nav-text">Home</span></div>
    <div class="nav-item" onclick="navTo('peaks')"><span class="nav-icon">â–³</span><span class="nav-text">Peaks</span></div>
    <div class="nav-item" onclick="navTo('gear')"><span class="nav-icon">â–¡</span><span class="nav-text">Gear</span></div>
    <div class="nav-item" onclick="navTo('training')"><span class="nav-icon">â—‡</span><span class="nav-text">Train</span></div>
</nav>

<!-- å®Œç™»å½ˆçª— -->
<div id="modal-completed" class="modal">
    <div class="close-modal" onclick="closeModal()">Ã—</div>
    <h1>å®Œç™»æ¸…å–®</h1>
    <div id="completed-list-content"></div>
</div>

<!-- æ‰€æœ‰çš„ JavaScript é‚è¼¯ -->
<script>
    // å®Œæ•´çš„ 100 åº§ç™¾å²³æ•¸æ“š
    const PEAKS_DATA = [
        {id:1, name:"ç‰å±±ä¸»å³°", height:3952, grade:"A", range:"ç‰å±±", hut:"æ’é›²å±±èŠ", permit:"å…¥åœ’+å…¥å±±", transport:"å˜‰ç¾©è½‰æ¥é§"},
        {id:2, name:"é›ªå±±ä¸»å³°", height:3886, grade:"A", range:"é›ªå±±", hut:"ä¸‰å…­ä¹å±±èŠ", permit:"å…¥åœ’", transport:"æ­¦é™µè¾²å ´"},
        {id:3, name:"ç§€å§‘å·’å±±", height:3825, grade:"B", range:"ä¸­å¤®å±±è„ˆ", hut:"ç™½æ´‹é‡‘ç¤¦", permit:"å…¥åœ’+å…¥å±±", transport:"æ±åŸ”"},
        {id:4, name:"é¦¬åšæ‹‰æ–¯å±±", height:3785, grade:"C", range:"ä¸­å¤®å±±è„ˆ", hut:"é¦¬å‰æ± ", permit:"å…¥åœ’+å…¥å±±", transport:"æ±åŸ”"},
        {id:5, name:"å—æ¹–å¤§å±±", height:3742, grade:"B", range:"ä¸­å¤®å±±è„ˆ", hut:"å—æ¹–å±±å±‹", permit:"å…¥åœ’", transport:"æ€æº"},
        {id:6, name:"æ±å±±", height:3704, grade:"B", range:"ç‰å±±", hut:"æ’é›²å±±èŠ", permit:"å…¥åœ’+å…¥å±±", transport:"å˜‰ç¾©"},
        {id:7, name:"ä¸­å¤®å°–å±±", height:3703, grade:"C", range:"ä¸­å¤®å±±è„ˆ", hut:"ä¸­å¤®å°–æºªæœ¨å±‹", permit:"å…¥åœ’", transport:"æ€æº"},
        {id:8, name:"é›ªå±±åŒ—å³°", height:3703, grade:"B", range:"é›ªå±±", hut:"é›ªåŒ—å±±å±‹", permit:"å…¥åœ’", transport:"æ­¦é™µ"},
        {id:9, name:"å¤§é—œå±±", height:3668, grade:"A", range:"å—æ©«", hut:"åº«å“ˆè«¾æ–¯å±±å±‹", permit:"å…¥å±±", transport:"å—æ©«"},
        {id:10, name:"é¦¬åˆ©åŠ å—å±±", height:3546, grade:"C", range:"ä¸­å¤®å±±è„ˆ", hut:"é¦¬åˆ©åŠ å—å±±å±‹", permit:"å…¥åœ’+å…¥å±±", transport:"æ±åŸ”"},
        {id:11, name:"å—æ¹–åŒ—å±±", height:3536, grade:"B", range:"ä¸­å¤®å±±è„ˆ", hut:"å—æ¹–å±±å±‹", permit:"å…¥å±±", transport:"æ€æº"},
        {id:12, name:"å¤§éœ¸å°–å±±", height:3492, grade:"B", range:"é›ªå±±", hut:"ä¹ä¹å±±èŠ", permit:"å…¥åœ’", transport:"è§€éœ§"},
        {id:13, name:"å—é ­å±±", height:3449, grade:"C", range:"ä¸­å¤®å±±è„ˆ", hut:"å—æ¹–å±±å±‹", permit:"å…¥å±±", transport:"æ€æº"},
        {id:14, name:"å“ç”°å±±", height:3524, grade:"B", range:"æ­¦é™µä¸‰å°–", hut:"æ–°é”å±±å±‹", permit:"å…¥åœ’", transport:"æ­¦é™µ"},
        {id:15, name:"å¤§é›ªå±±", height:3530, grade:"C", range:"é›ªå±±", hut:"ç¿ æ± å±±å±‹", permit:"å…¥åœ’", transport:"æ­¦é™µ"},
        {id:16, name:"å¥‡èŠä¸»å³°", height:3560, grade:"B", range:"å¥‡èŠ", hut:"å¥‡èŠå±±å±‹", permit:"å…¥å±±", transport:"åˆæ­¡"},
        {id:17, name:"å¥‡èŠåŒ—å³°", height:3607, grade:"B", range:"å¥‡èŠ", hut:"å¥‡èŠå±±å±‹", permit:"å…¥å±±", transport:"åˆæ­¡"},
        {id:18, name:"å‘é™½å±±", height:3602, grade:"A", range:"å—äºŒæ®µ", hut:"å˜‰æ˜æ¹–å±±å±‹", permit:"å…¥å±±", transport:"å‘é™½"},
        {id:19, name:"å¤§æ°´çªŸå±±", height:3642, grade:"B", range:"å—äºŒæ®µ", hut:"å¤§æ°´çªŸå±±å±‹", permit:"å…¥åœ’+å…¥å±±", transport:"æ±åŸ”"},
        {id:20, name:"åˆæ­¡åŒ—å³°", height:3422, grade:"A", range:"åˆæ­¡", hut:"ç„¡(å–®æ”»)", permit:"å…", transport:"å°14ç”²"},
        {id:21, name:"åˆæ­¡ä¸»å³°", height:3417, grade:"A", range:"åˆæ­¡", hut:"ç„¡(å–®æ”»)", permit:"å…", transport:"å°14ç”²"},
        {id:22, name:"åˆæ­¡æ±å³°", height:3421, grade:"A", range:"åˆæ­¡", hut:"ç„¡(å–®æ”»)", permit:"å…", transport:"å°14ç”²"},
        {id:23, name:"çŸ³é–€å±±", height:3237, grade:"A", range:"åˆæ­¡", hut:"ç„¡(å–®æ”»)", permit:"å…", transport:"å°14ç”²"},
        {id:24, name:"åˆæ­¡è¥¿å³°", height:3145, grade:"B", range:"åˆæ­¡", hut:"ç„¡(å–®æ”»)", permit:"å…", transport:"å°14ç”²"},
        {id:25, name:"åŒ—å¤§æ­¦å±±", height:3092, grade:"B", range:"å—ç«¯", hut:"æªœè°·å±±èŠ", permit:"å…¥å±±", transport:"æ³°æ­¦"},
        {id:26, name:"ç«çŸ³å±±", height:3310, grade:"C", range:"é›ªå±±", hut:"ç„¡", permit:"å…¥åœ’", transport:"æ­¦é™µ"},
        {id:27, name:"é ­é·¹å±±", height:3510, grade:"C", range:"é›ªå±±", hut:"ç„¡", permit:"å…¥åœ’", transport:"æ­¦é™µ"},
        {id:28, name:"å¿—ä½³é™½å¤§å±±", height:3345, grade:"A", range:"é›ªå±±", hut:"ç“¢å–®å±±å±‹", permit:"å…¥åœ’", transport:"ç’°å±±"},
        {id:29, name:"å°éœ¸å°–å±±", height:3411, grade:"B", range:"é›ªå±±", hut:"ä¹ä¹å±±èŠ", permit:"å…¥åœ’", transport:"è§€éœ§"},
        {id:30, name:"åŠ åˆ©å±±", height:3112, grade:"A", range:"é›ªå±±", hut:"ä¹ä¹å±±èŠ", permit:"å…¥åœ’", transport:"è§€éœ§"},
        {id:31, name:"ä¼Šæ¾¤å±±", height:3297, grade:"A", range:"é›ªå±±", hut:"ä¹ä¹å±±èŠ", permit:"å…¥åœ’", transport:"è§€éœ§"},
        {id:32, name:"å‘å—ä¸»å±±", height:3295, grade:"C", range:"å—ä¸€æ®µ", hut:"ç„¡", permit:"å…¥å±±", transport:"è—¤æ"},
        {id:33, name:"å¤ªé­¯é–£å¤§å±±", height:3283, grade:"C", range:"å¥‡èŠæ±ç¨œ", hut:"ç„¡", permit:"å…¥åœ’", transport:"åˆæ­¡"},
        {id:34, name:"ä¸¹å¤§å±±", height:3325, grade:"C", range:"ä¸¹å¤§", hut:"ç„¡", permit:"å…¥å±±", transport:"ç‘ç©—"},
        {id:35, name:"å…§å¶ºçˆ¾å±±", height:3275, grade:"C", range:"ä¸¹å¤§", hut:"ç„¡", permit:"å…¥å±±", transport:"ç‘ç©—"},
        {id:36, name:"ç¾©è¥¿è«‹é¦¬è‡³å±±", height:3245, grade:"C", range:"ä¸¹å¤§", hut:"ç„¡", permit:"å…¥å±±", transport:"ç‘ç©—"},
        {id:37, name:"å±é¢¨å±±", height:3250, grade:"B", range:"å¥‡èŠ", hut:"å±é¢¨å±±å±‹", permit:"å…", transport:"å¤§ç¦¹å¶º"},
        {id:38, name:"å°é—œå±±", height:3249, grade:"B", range:"å—ä¸€æ®µ", hut:"ç„¡", permit:"å…¥å±±", transport:"è—¤æ"},
        {id:39, name:"ç„¡é›™å±±", height:3231, grade:"C", range:"ä¸¹å¤§", hut:"ç„¡", permit:"å…¥å±±", transport:"ç‘ç©—"},
        {id:40, name:"èƒ½é«˜ä¸»å³°", height:3262, grade:"B", range:"èƒ½é«˜", hut:"å¤©æ± å±±èŠ", permit:"å…¥å±±", transport:"å»¬å±±"},
        {id:41, name:"èƒ½é«˜å±±å—å³°", height:3349, grade:"B", range:"èƒ½é«˜", hut:"å¤©æ± å±±èŠ", permit:"å…¥å±±", transport:"å»¬å±±"},
        {id:42, name:"å…‰é ­å±±", height:3135, grade:"B", range:"èƒ½é«˜", hut:"å¤©æ± å±±èŠ", permit:"å…¥å±±", transport:"å»¬å±±"},
        {id:43, name:"ç™½çŸ³å±±", height:3110, grade:"B", range:"èƒ½é«˜", hut:"ç„¡", permit:"å…¥å±±", transport:"å»¬å±±"},
        {id:44, name:"å®‰æ±è»å±±", height:3068, grade:"B", range:"èƒ½é«˜", hut:"ç„¡", permit:"å…¥å±±", transport:"å»¬å±±"},
        {id:45, name:"å“ç¤¾å¤§å±±", height:3369, grade:"C", range:"å¹²å“è¬", hut:"ç„¡", permit:"å…¥å±±", transport:"è¬å¤§"},
        {id:46, name:"å¹²å“è¬å±±", height:3284, grade:"C", range:"å¹²å“è¬", hut:"ç„¡", permit:"å…¥å±±", transport:"è¬å¤§"},
        {id:47, name:"ç‰§å±±", height:3241, grade:"C", range:"å¹²å“è¬", hut:"ç„¡", permit:"å…¥å±±", transport:"è¬å¤§"},
        {id:48, name:"ç«å±±", height:3258, grade:"C", range:"å¹²å“è¬", hut:"ç„¡", permit:"å…¥å±±", transport:"è¬å¤§"},
        {id:49, name:"æ¡ƒå±±", height:3325, grade:"A", range:"æ­¦é™µå››ç§€", hut:"æ¡ƒå±±å±±å±‹", permit:"å…¥åœ’", transport:"æ­¦é™µ"},
        {id:50, name:"å–€æ‹‰æ¥­å±±", height:3133, grade:"A", range:"æ­¦é™µå››ç§€", hut:"æ¡ƒå±±å±±å±‹", permit:"å…¥åœ’", transport:"æ­¦é™µ"},
        {id:51, name:"æ± æœ‰å±±", height:3303, grade:"A", range:"æ­¦é™µå››ç§€", hut:"æ–°é”å±±å±‹", permit:"å…¥åœ’", transport:"æ­¦é™µ"},
        {id:52, name:"å…«é€šé—œå±±", height:3335, grade:"A", range:"å—äºŒæ®µ", hut:"è§€é«˜åª", permit:"å…¥åœ’+å…¥å±±", transport:"æ±åŸ”"},
        {id:53, name:"æµ·è«¾å—å±±", height:3175, grade:"B", range:"å—ä¸€æ®µ", hut:"ç„¡", permit:"å…¥å±±", transport:"è—¤æ"},
        {id:54, name:"é—œå±±å¶ºå±±", height:3176, grade:"A", range:"å—æ©«", hut:"ç„¡", permit:"å…", transport:"å¤§é—œå±±"},
        {id:55, name:"å¡”é—œå±±", height:3222, grade:"A", range:"å—æ©«", hut:"ç„¡", permit:"å…", transport:"å—æ©«"},
        {id:56, name:"åº«å“ˆè«¾æ–¯å±±", height:3115, grade:"A", range:"å—æ©«", hut:"åº«å“ˆè«¾æ–¯å±±å±‹", permit:"å…¥åœ’", transport:"å—æ©«"},
        {id:57, name:"é›²å³°", height:3564, grade:"B", range:"å—äºŒæ®µ", hut:"ç„¡", permit:"å…¥åœ’+å…¥å±±", transport:"æ±åŸ”"},
        {id:58, name:"å¸•æ‰˜é­¯å±±", height:3101, grade:"C", range:"å¥‡èŠæ±ç¨œ", hut:"ç„¡", permit:"å…¥åœ’", transport:"åˆæ­¡"},
        {id:59, name:"ç«‹éœ§ä¸»å±±", height:3070, grade:"C", range:"å¥‡èŠæ±ç¨œ", hut:"ç„¡", permit:"å…¥åœ’", transport:"åˆæ­¡"},
        {id:60, name:"ç£çŸ³å±±", height:3106, grade:"C", range:"å¥‡èŠæ±ç¨œ", hut:"ç„¡", permit:"å…¥åœ’", transport:"åˆæ­¡"},
        {id:61, name:"ç”˜è–¯å³°", height:3158, grade:"C", range:"åŒ—äºŒæ®µ", hut:"ç„¡", permit:"å…¥åœ’", transport:"æ¸…æ³‰æ©‹"},
        {id:62, name:"ç„¡æ˜å±±", height:3451, grade:"C", range:"åŒ—äºŒæ®µ", hut:"ç„¡", permit:"å…¥åœ’", transport:"æ¸…æ³‰æ©‹"},
        {id:63, name:"éˆ´é³´å±±", height:3272, grade:"B", range:"åŒ—äºŒæ®µ", hut:"ç„¡", permit:"å…¥åœ’", transport:"æ¸…æ³‰æ©‹"},
        {id:64, name:"ç•¢ç¥¿å±±", height:3371, grade:"B", range:"åŒ—äºŒæ®µ", hut:"ç„¡", permit:"å…", transport:"å¤§ç¦¹å¶º"},
        {id:65, name:"ç¾Šé ­å±±", height:3035, grade:"B", range:"åŒ—äºŒæ®µ", hut:"ç„¡", permit:"å…", transport:"æ…ˆæ©"},
        {id:66, name:"å…­é †å±±", height:2999, grade:"C", range:"ä¸­å¤®å±±è„ˆ", hut:"ç„¡", permit:"å…¥å±±", transport:"è¬æ¦®"},
        {id:67, name:"å¤§åŠå±±", height:3594, grade:"C", range:"é›ªå±±", hut:"æ²¹å©†è˜­", permit:"å…¥åœ’", transport:"æ¢¨å±±"},
        {id:68, name:"åŠå±±", height:3253, grade:"C", range:"é›ªå±±", hut:"æ²¹å©†è˜­", permit:"å…¥åœ’", transport:"æ¢¨å±±"},
        {id:69, name:"ä½³é™½å±±", height:3314, grade:"C", range:"é›ªå±±", hut:"æ²¹å©†è˜­", permit:"å…¥åœ’", transport:"æ¢¨å±±"},
        {id:70, name:"é¹¿å±±", height:2981, grade:"C", range:"ç‰å±±", hut:"åœ“å³°å±±å±‹", permit:"å…¥åœ’+å…¥å±±", transport:"å˜‰ç¾©"},
        {id:71, name:"æ±å°å—å±±", height:3711, grade:"B", range:"ç‰å±±", hut:"åœ“å³°å±±å±‹", permit:"å…¥åœ’+å…¥å±±", transport:"å˜‰ç¾©"},
        {id:72, name:"ç‰å±±å—å³°", height:3844, grade:"B", range:"ç‰å±±", hut:"åœ“å³°å±±å±‹", permit:"å…¥åœ’+å…¥å±±", transport:"å˜‰ç¾©"},
        {id:73, name:"å—ç‰å±±", height:3383, grade:"B", range:"ç‰å±±", hut:"åœ“å³°å±±å±‹", permit:"å…¥åœ’+å…¥å±±", transport:"å˜‰ç¾©"},
        {id:74, name:"ç‰å±±åŒ—å³°", height:3858, grade:"B", range:"ç‰å±±", hut:"æ’é›²å±±å±‹", permit:"å…¥åœ’+å…¥å±±", transport:"å˜‰ç¾©"},
        {id:75, name:"ç‰å±±è¥¿å³°", height:3517, grade:"B", range:"ç‰å±±", hut:"æ’é›²å±±å±‹", permit:"å…¥åœ’+å…¥å±±", transport:"å˜‰ç¾©"},
        {id:76, name:"ä¸‰å‰å±±", height:3496, grade:"B", range:"å—äºŒæ®µ", hut:"å˜‰æ˜æ¹–å±±å±‹", permit:"å…¥å±±", transport:"å‘é™½"},
        {id:77, name:"å—é›™é ­å±±", height:3356, grade:"B", range:"å—äºŒæ®µ", hut:"ç„¡", permit:"å…¥åœ’+å…¥å±±", transport:"æ±åŸ”"},
        {id:78, name:"è½†è½†å±±", height:3279, grade:"B", range:"å—äºŒæ®µ", hut:"è½†è½†è°·", permit:"å…¥åœ’+å…¥å±±", transport:"æ±åŸ”"},
        {id:79, name:"å¡”èŠ¬å±±", height:3070, grade:"B", range:"å—äºŒæ®µ", hut:"å¡”èŠ¬æ± ", permit:"å…¥åœ’+å…¥å±±", transport:"æ±åŸ”"},
        {id:80, name:"é”èŠ¬å°–å±±", height:3208, grade:"B", range:"å—äºŒæ®µ", hut:"ç„¡", permit:"å…¥åœ’+å…¥å±±", transport:"æ±åŸ”"},
        {id:81, name:"å·´å·´å±±", height:3442, grade:"B", range:"å—æ¹–", hut:"å—æ¹–å±±å±‹", permit:"å…¥å±±", transport:"æ€æº"},
        {id:82, name:"é¦¬æ¯”æ‰å±±", height:3211, grade:"C", range:"å—æ¹–", hut:"ç„¡", permit:"å…¥å±±", transport:"æ€æº"},
        {id:83, name:"å—æ¹–å—å³°", height:3462, grade:"B", range:"å—æ¹–", hut:"å—æ¹–å±±å±‹", permit:"å…¥å±±", transport:"æ€æº"},
        {id:84, name:"å¯©é¦¬é™£å±±", height:3141, height:3141, grade:"A", range:"å—æ¹–", hut:"å¯©é¦¬é™£å±±å±‹", permit:"å…¥å±±", transport:"æ€æº"},
        {id:85, name:"é›ªå±±æ±å³°", height:3201, grade:"A", range:"é›ªå±±", hut:"ä¸ƒå¡å±±èŠ", permit:"å…¥åœ’", transport:"æ­¦é™µ"},
        {id:86, name:"é–‚å±±", height:3168, grade:"A", range:"åŒ—äºŒæ®µ", hut:"ç„¡", permit:"å…¥åœ’", transport:"æ¸…æ³‰æ©‹"},
        {id:87, name:"è¥¿å·’å¤§å±±", height:3081, grade:"B", range:"ç‰å±±è¥¿éƒ¨", hut:"ç„¡", permit:"å…", transport:"äººå€«"},
        {id:88, name:"éƒ¡å¤§å±±", height:3265, grade:"A", range:"ç‰å±±è¥¿éƒ¨", hut:"ç„¡", permit:"å…", transport:"éƒ¡å¤§æ—é“"},
        {id:89, name:"å¸ƒæ‹‰å…‹æ¡‘å±±", height:3025, grade:"B", range:"å—äºŒæ®µ", hut:"ç„¡", permit:"å…¥å±±", transport:"å‘é™½"},
        {id:90, name:"ç™½å§‘å¤§å±±", height:3341, grade:"B", range:"ä¸­æ©«", hut:"ç„¡", permit:"å…", transport:"ç´…é¦™"},
        {id:91, name:"å¡ç¾…æ¨“å±±", height:3385, grade:"C", range:"å¥‡èŠ", hut:"ç„¡", permit:"å…¥å±±", transport:"åˆæ­¡"},
        {id:92, name:"ä¹è¯å±±", height:3060, grade:"C", range:"ä¸¹å¤§", hut:"ç„¡", permit:"å…¥å±±", transport:"ç‘ç©—"},
        {id:93, name:"å—é›™é ­å±±", height:3356, grade:"B", range:"å—äºŒæ®µ", hut:"ç„¡", permit:"å…¥åœ’+å…¥å±±", transport:"æ±åŸ”"},
        {id:94, name:"ç¾©è¥¿è«‹é¦¬è‡³å±±", height:3245, grade:"C", range:"ä¸­å¤®å±±è„ˆ", hut:"ç„¡", permit:"å…¥å±±", transport:"ç‘ç©—"},
        {id:95, name:"å°é—œå±±", height:3249, grade:"B", range:"å—ä¸€æ®µ", hut:"ç„¡", permit:"å…¥å±±", transport:"è—¤æ"},
        {id:96, name:"æµ·è«¾å—å±±", height:3175, grade:"B", range:"å—ä¸€æ®µ", hut:"ç„¡", permit:"å…¥å±±", transport:"è—¤æ"},
        {id:97, name:"é—œå±±", height:3668, grade:"B", range:"å—ä¸€æ®µ", hut:"åº«å“ˆè«¾æ–¯", permit:"å…¥åœ’", transport:"å—æ©«"},
        {id:98, name:"åº«å“ˆè«¾æ–¯å±±", height:3115, grade:"A", range:"å—æ©«", hut:"åº«å“ˆè«¾æ–¯", permit:"å…¥åœ’", transport:"å—æ©«"},
        {id:99, name:"å‘å—ä¸»å±±", height:3295, grade:"C", range:"å—ä¸€æ®µ", hut:"ç„¡", permit:"å…¥å±±", transport:"è—¤æ"},
        {id:100, name:"çŸ³é–€å±±", height:3237, grade:"A", range:"åˆæ­¡", hut:"ç„¡", permit:"å…", transport:"å°14ç”²"}
    ];

    // æ‡‰ç”¨ç¨‹å¼ç‹€æ…‹ç®¡ç†
    let state = {
        completed: JSON.parse(localStorage.getItem('mh-completed')) || {},
        gears: JSON.parse(localStorage.getItem('mh-gears')) || [],
        logs: JSON.parse(localStorage.getItem('mh-train-logs')) || []
    };

    // å„²å­˜ç‹€æ…‹åˆ°æœ¬åœ°
    function save() {
        localStorage.setItem('mh-completed', JSON.stringify(state.completed));
        localStorage.setItem('mh-gears', JSON.stringify(state.gears));
        localStorage.setItem('mh-train-logs', JSON.stringify(state.logs));
        updateUI();
    }

    // é é¢åˆ‡æ›é‚è¼¯
    function navTo(page) {
        document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
        document.querySelectorAll('.nav-item').forEach(n => n.classList.remove('active'));
        document.getElementById(`page-${page}`).classList.add('active');
        const navIdx = {home:0, peaks:1, gear:2, training:3}[page];
        document.querySelectorAll('.nav-item')[navIdx].classList.add('active');
    }

    // æ¸²æŸ“ç™¾å²³åˆ—è¡¨
    function renderPeaks() {
        const container = document.getElementById('peaks-container');
        container.innerHTML = PEAKS_DATA.map(p => `
            <div class="peak-item" onclick="togglePeak(${p.id})">
                <div class="peak-main">
                    <span class="peak-title">${p.id.toString().padStart(3, '0')} ${p.name} (${p.height}m)</span>
                    <span class="peak-meta">${p.grade}ç´š | ${p.range}</span>
                </div>
                <div id="peak-detail-${p.id}" class="peak-details">
                    <p>ğŸ›– å±±å±‹ï¼š${p.hut}</p>
                    <p>ğŸ“‹ è­‰ä»¶ï¼š${p.permit}</p>
                    <p>ğŸšŒ äº¤é€šï¼š${p.transport}</p>
                    <button class="btn-done ${state.completed[p.id] ? 'is-completed' : ''}" onclick="toggleComplete(event, ${p.id}, '${p.name}')">
                        ${state.completed[p.id] ? 'å·²å®Œç™» (' + state.completed[p.id] + ')' : 'æ¨™è¨˜ç‚ºå®Œç™»'}
                    </button>
                </div>
            </div>
        `).join('');
    }

    function togglePeak(id) {
        const el = document.getElementById(`peak-detail-${id}`);
        const isOpen = el.classList.contains('open');
        document.querySelectorAll('.peak-details').forEach(d => d.classList.remove('open'));
        if(!isOpen) el.classList.add('open');
    }

    function toggleComplete(event, id, name) {
        event.stopPropagation();
        if (state.completed[id]) {
            delete state.completed[id];
        } else {
            const date = new Date().toISOString().split('T')[0];
            state.completed[id] = date;
        }
        save();
        renderPeaks();
    }

    // è¼•é‡åŒ–ç³»çµ±é‚è¼¯
    function addGear() {
        const name = document.getElementById('gear-name').value;
        const weight = parseInt(document.getElementById('gear-weight').value);
        if(!name || isNaN(weight)) return;
        state.gears.push({ id: Date.now(), name, weight });
        document.getElementById('gear-name').value = '';
        document.getElementById('gear-weight').value = '';
        save();
        renderGears();
    }

    function deleteGear(id) {
        state.gears = state.gears.filter(g => g.id !== id);
        save();
        renderGears();
    }

    function renderGears() {
        const container = document.getElementById('gear-container');
        container.innerHTML = state.gears.map(g => `
            <div class="list-row">
                <div style="display:flex; align-items:center;">
                    <input type="checkbox" onchange="calcWeight()" class="gear-checkbox" data-weight="${g.weight}" style="margin-right:12px; width:18px; height:18px;">
                    ${g.name}
                </div>
                <div>${g.weight}g <span onclick="deleteGear(${g.id})" style="margin-left:15px; color:#ccc; cursor:pointer; font-size:18px;">Ã—</span></div>
            </div>
        `).join('');
        calcWeight();
    }

    function calcWeight() {
        let totalMg = 0;
        document.querySelectorAll('.gear-checkbox:checked').forEach(cb => { totalMg += parseInt(cb.dataset.weight); });
        document.getElementById('base-weight-display').innerText = (totalMg / 1000).toFixed(2);
    }

    // è¨“ç·´æ—¥èªŒé‚è¼¯
    function addTrain() {
        const date = document.getElementById('train-date').value;
        const desc = document.getElementById('train-desc').value;
        if(!date || !desc) return;
        state.logs.push({ id: Date.now(), date, desc });
        document.getElementById('train-desc').value = '';
        save();
        renderLogs();
    }

    function deleteLog(id) {
        state.logs = state.logs.filter(l => l.id !== id);
        save();
        renderLogs();
    }

    function renderLogs() {
        const container = document.getElementById('training-container');
        const sortedLogs = [...state.logs].sort((a, b) => b.date.localeCompare(a.date));
        container.innerHTML = sortedLogs.map(l => `
            <div class="list-row">
                <div style="flex:1;">
                    <div class="log-date">${l.date}</div>
                    <div style="font-size:14px; color:#333; line-height:1.5;">${l.desc}</div>
                </div>
                <span onclick="deleteLog(${l.id})" style="color:#ccc; font-size:22px; padding-left:15px; cursor:pointer;">Ã—</span>
            </div>
        `).join('');
    }

    // UI æ›´æ–°
    function updateUI() {
        const count = Object.keys(state.completed).length;
        document.getElementById('total-done-count').innerText = count;
        document.getElementById('main-progress-bar').style.width = count + '%';
    }

    function showCompletedList() {
        const content = document.getElementById('completed-list-content');
        const entries = Object.entries(state.completed).sort((a,b) => b[1].localeCompare(a[1]));
        if(entries.length === 0) {
            content.innerHTML = "<p style='color:#717171; font-size:14px; text-align:center; padding-top:40px;'>å°šæœªæ¨™è¨˜ä»»ä½•å®Œç™»ç™¾å²³ã€‚</p>";
        } else {
            content.innerHTML = entries.map(([id, date]) => {
                const p = PEAKS_DATA.find(x => x.id == id);
                return `<div style="padding:16px 0; border-bottom:0.5px solid #eee; font-size:14px;">
                    <strong>${p ? p.name : 'æœªçŸ¥'}</strong> <span style="color:#717171; float:right;">${date}</span>
                </div>`;
            }).join('');
        }
        document.getElementById('modal-completed').classList.add('active');
    }

    function closeModal() {
        document.querySelectorAll('.modal').forEach(m => m.classList.remove('active'));
    }

    // åˆå§‹åŒ–æ‡‰ç”¨ç¨‹å¼
    window.onload = () => {
        document.getElementById('train-date').valueAsDate = new Date();
        renderPeaks();
        renderGears();
        renderLogs();
        updateUI();
    };
</script>

</body>
</html>

